{% extends 'base.html' %}
{% load static %}

{% block title %}Detalle de Registro - {{ object.fecha }}{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h3 class="card-title">
                        <i class="fas fa-clock text-primary me-2"></i>
                        Detalle del Registro de Horas
                    </h3>
                    <div class="btn-group">
                        <a href="{% url 'horas:hora_update' object.pk %}" class="btn btn-warning">
                            <i class="fas fa-edit me-1"></i>
                            Editar
                        </a>
                        <a href="{% url 'horas:hora_delete' object.pk %}" 
                           class="btn btn-danger"
                           onclick="return confirm('¿Está seguro de eliminar este registro?')">
                            <i class="fas fa-trash me-1"></i>
                            Eliminar
                        </a>
                        <a href="{% url 'horas:hora_list' %}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left me-1"></i>
                            Volver
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card border-primary">
                                <div class="card-header bg-primary text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-info-circle me-2"></i>
                                        Información General
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <dl class="row">
                                        <dt class="col-sm-4">Fecha:</dt>
                                        <dd class="col-sm-8">
                                            <span class="badge bg-primary fs-6">
                                                {{ object.fecha|date:"l, d \d\e F \d\e Y" }}
                                            </span>
                                        </dd>
                                        
                                        <dt class="col-sm-4">Horas:</dt>
                                        <dd class="col-sm-8">
                                            <span class="badge bg-success fs-6">
                                                <i class="fas fa-clock me-1"></i>
                                                {{ object.horas }} horas
                                            </span>
                                        </dd>
                                        
                                        <dt class="col-sm-4">Tipo de Tarea:</dt>
                                        <dd class="col-sm-8">
                                            <span class="badge bg-{{ object.tipo_tarea_color }} fs-6">
                                                <i class="{{ object.tipo_tarea_icon }} me-1"></i>
                                                {{ object.get_tipo_tarea_display }}
                                            </span>
                                        </dd>
                                        
                                        <dt class="col-sm-4">Período:</dt>
                                        <dd class="col-sm-8">
                                            <span class="badge bg-info fs-6">
                                                {{ object.periodo.nombre }}
                                            </span>
                                        </dd>
                                    </dl>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card border-success">
                                <div class="card-header bg-success text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-project-diagram me-2"></i>
                                        Proyecto
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <dl class="row">
                                        <dt class="col-sm-4">Nombre:</dt>
                                        <dd class="col-sm-8">
                                            <a href="{% url 'proyectos:proyecto_detail' object.proyecto.pk %}" 
                                               class="text-decoration-none">
                                                <span class="badge fs-6" 
                                                      style="background-color: {{ object.proyecto.color_hex }}; color: white;">
                                                    {{ object.proyecto.nombre }}
                                                </span>
                                            </a>
                                        </dd>
                                        
                                        <dt class="col-sm-4">Cliente:</dt>
                                        <dd class="col-sm-8">
                                            <span class="text-muted">
                                                {{ object.proyecto.cliente|default:"Sin cliente" }}
                                            </span>
                                        </dd>
                                        
                                        <dt class="col-sm-4">Estado:</dt>
                                        <dd class="col-sm-8">
                                            {% if object.proyecto.activo %}
                                                <span class="badge bg-success">Activo</span>
                                            {% else %}
                                                <span class="badge bg-secondary">Inactivo</span>
                                            {% endif %}
                                        </dd>
                                    </dl>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {% if object.descripcion %}
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card border-warning">
                                <div class="card-header bg-warning text-dark">
                                    <h5 class="mb-0">
                                        <i class="fas fa-file-alt me-2"></i>
                                        Descripción de Actividades
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <p class="mb-0">{{ object.descripcion|linebreaks }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card border-secondary">
                                <div class="card-header bg-secondary text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-history me-2"></i>
                                        Información de Auditoría
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <dl class="row">
                                        <dt class="col-sm-3">Creado:</dt>
                                        <dd class="col-sm-9">
                                            <i class="fas fa-calendar-plus text-success me-1"></i>
                                            {{ object.created_at|date:"d/m/Y H:i" }}
                                        </dd>
                                        
                                        <dt class="col-sm-3">Última modificación:</dt>
                                        <dd class="col-sm-9">
                                            <i class="fas fa-calendar-edit text-warning me-1"></i>
                                            {{ object.updated_at|date:"d/m/Y H:i" }}
                                        </dd>
                                        
                                        <dt class="col-sm-3">Usuario:</dt>
                                        <dd class="col-sm-9">
                                            <i class="fas fa-user text-primary me-1"></i>
                                            {{ object.usuario.get_full_name|default:object.usuario.username }}
                                        </dd>
                                    </dl>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add tooltips to badges
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
});
</script>
{% endblock %}
